# ุฅุตูุงุญ ูุดุงูู ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ

## ุงููุดุงูู ุงูููุชุดูุฉ ูุงูุฃุณุจุงุจ ๐

### 1. **ุนุฏู ุชุทุงุจู ุฃุณูุงุก ุญููู ุงูุตูุฑ**
**ุงููุดููุฉ:** Cloud Function ูุงูุช ุชุจุญุซ ููุท ุนู:
- `imageUrls`
- `beforeImageUrls` 
- `afterImageUrls`

**ููู ุงูุจูุงูุงุช ุงููุฏููุฉ ูุญููุธุฉ ุจุงุณู:**
- `beforeImages`
- `afterImages`
- `otherImages`
- `otherImageUrls`

### 2. **ุนุฏู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุนุทูุจุฉ**
**ุงููุดููุฉ:** Cloud Function ูุง ุชุชุญูู ูู:
- ูุฌูุฏ `timestamp` ูู ุงูุฅุฏุฎุงูุงุช
- ุตุญุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
- ูุนุงูุฌุฉ ุงูููู ุงููุงุฑุบุฉ ุฃู null

### 3. **ูุดุงูู ูู cache ูุงูsnapshots**
**ุงููุดููุฉ:** ุจุนุถ ุงููุดุงุฑูุน ููุง snapshots ูุนุทูุจุฉ ุฃู ูุฏููุฉ

## ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ โ

### 1. **ุฅุตูุงุญ Cloud Function (functions/index.js)**

#### ุฃ) ุฏุนู ุฌููุน ุฃุณูุงุก ุงูุญููู:
```javascript
// ูุจู ุงูุฅุตูุงุญ
if (entryData.imageUrls && Array.isArray(entryData.imageUrls)) {
  // ูุนุงูุฌุฉ imageUrls ููุท
}

// ุจุนุฏ ุงูุฅุตูุงุญ
const imageUrls = entryData.imageUrls || entryData.otherImages || entryData.otherImageUrls || [];
const beforeUrls = entryData.beforeImageUrls || entryData.beforeImages || [];
const afterUrls = entryData.afterImageUrls || entryData.afterImages || [];
```

#### ุจ) ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช:
```javascript
// ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
if (!entryData || !entryData.timestamp) {
  console.warn(`Skipping entry ${entry.id} - missing required data`);
  continue;
}
```

#### ุฌ) ูุนุงูุฌุฉ ุขููุฉ ููุตูุฑ:
```javascript
if (Array.isArray(imageUrls)) {
  imageUrls.forEach(url => {
    if (url && typeof url === 'string') {
      // ูุนุงูุฌุฉ ุงูุตูุฑุฉ
    }
  });
}
```

### 2. **ุฅุถุงูุฉ ุฏุงูุฉ ุฅุนุงุฏุฉ ุงูุจูุงุก**
```javascript
// ุฏุงูุฉ ุฌุฏูุฏุฉ ูุฅุนุงุฏุฉ ุจูุงุก ุฌููุน snapshots
exports.rebuildAllSnapshots = functions.https.onCall(async (data, context) => {
  // ุฅุนุงุฏุฉ ุจูุงุก snapshots ูุฌููุน ุงููุดุงุฑูุน
});
```

### 3. **ุชุทุจูู ุงูุฅุตูุงุญุงุช ุนูู:**
- **Main Phases**: ุงููุฑุงุญู ุงูุฑุฆูุณูุฉ
- **Sub Phases**: ุงููุฑุงุญู ุงููุฑุนูุฉ
- **ุฌููุน ุฃููุงุน ุงูุตูุฑ**: ูุจูุ ุจุนุฏุ ุฅุถุงููุฉ

## ููููุฉ ุชุทุจูู ุงูุฅุตูุงุญุงุช ๐

### 1. **ูุดุฑ Cloud Functions ุงููุญุฏุซุฉ**
```bash
cd functions
npm install
firebase deploy --only functions
```

### 2. **ุฅุนุงุฏุฉ ุจูุงุก Snapshots ูููุดุงุฑูุน ุงููุชุฃุซุฑุฉ**

#### ุงูุทุฑููุฉ ุงูุฃููู: ูู ุงูุชุทุจูู
```dart
// ูู Flutter
final result = await FirebaseFunctions.instance
    .httpsCallable('rebuildAllSnapshots')
    .call();
```

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูู Firebase Console
```javascript
// ูู Firebase Console > Functions
// ุชุดุบูู rebuildAllSnapshots()
```

### 3. **ุชุญุฏูุซ ุงูุชุทุจูู**
- ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู
- ูุณุญ cache ุงูุชูุงุฑูุฑ
- ุฅูุดุงุก ุชูุฑูุฑ ุดุงูู ุฌุฏูุฏ

## ุงููุชุงุฆุฌ ุงููุชููุนุฉ ๐

### ูุจู ุงูุฅุตูุงุญ:
- โ ุจุนุถ ุงููุดุงุฑูุน: ุจูุงูุงุช ูุงูุตุฉ ูู ุงูุชูุงุฑูุฑ
- โ ุตูุฑ ูุฏููุฉ: ูุง ุชุธูุฑ ูู ุงูุชูุงุฑูุฑ
- โ ุฅุฏุฎุงูุงุช ูุนุทูุจุฉ: ุชุณุจุจ ุฃุฎุทุงุก

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ุฌููุน ุงููุดุงุฑูุน: ุจูุงูุงุช ูุงููุฉ
- โ ุฌููุน ุงูุตูุฑ: ุชุธูุฑ ุจุตุญุฉ (ูุฏููุฉ ูุฌุฏูุฏุฉ)
- โ ูุนุงูุฌุฉ ุขููุฉ: ุชุฌุงูู ุงูุจูุงูุงุช ุงููุนุทูุจุฉ

## ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช ๐งช

### 1. **ุงุฎุชุจุงุฑ ูุดุฑูุน ูุชุฃุซุฑ:**
1. ุงุฎุชุฑ ูุดุฑูุน ูุงู ูุนุงูู ูู ูุดุงูู
2. ุฃูุดุฆ ุชูุฑูุฑ ุดุงูู ุฌุฏูุฏ
3. ุชุญูู ูู ุธููุฑ ุฌููุน ุงูุตูุฑ ูุงูุจูุงูุงุช

### 2. **ุงุฎุชุจุงุฑ ูุดุฑูุน ุฌุฏูุฏ:**
1. ุฃูุดุฆ ุฅุฏุฎุงูุงุช ุฌุฏูุฏุฉ ุจุตูุฑ
2. ุฃูุดุฆ ุชูุฑูุฑ ุดุงูู
3. ุชุฃูุฏ ูู ุธููุฑ ุงูุจูุงูุงุช ููุฑุงู

### 3. **ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก:**
1. ูุณ ููุช ุฅูุดุงุก ุงูุชูุฑูุฑ
2. ุชุญูู ูู ุงุณุชูุฑุงุฑ ุงููุธุงู
3. ุฑุงูุจ ุงุณุชููุงู ุงูุฐุงูุฑุฉ

## ูุนูููุงุช ุฅุถุงููุฉ ูููุทูุฑูู ๐จโ๐ป

### 1. **ุฃุณูุงุก ุงูุญููู ุงููุฏุนููุฉ:**
```javascript
// ุงูุตูุฑ ุงูุฅุถุงููุฉ
imageUrls || otherImages || otherImageUrls

// ุตูุฑ ูุจู
beforeImageUrls || beforeImages

// ุตูุฑ ุจุนุฏ  
afterImageUrls || afterImages
```

### 2. **ุงูุชุญูู ูู ุงูุจูุงูุงุช:**
```javascript
// ุงูุจูุงูุงุช ุงููุทููุจุฉ
- entryData (not null/undefined)
- entryData.timestamp (required)
- image URLs (string type check)
```

### 3. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
```javascript
// ุชุณุฌูู ุงูุฃุฎุทุงุก
console.warn(`Skipping entry ${entry.id} - missing required data`);

// ุงูุงุณุชูุฑุงุฑ ูุน ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
continue; // ุจุฏูุงู ูู throw error
```

## ุงูุตูุงูุฉ ุงููุณุชูุจููุฉ ๐ง

### 1. **ูุฑุงูุจุฉ ููุชุธูุฉ:**
- ูุญุต logs Cloud Functions
- ูุฑุงุฌุนุฉ ุฃุฏุงุก ุงูุชูุงุฑูุฑ
- ุชุญุฏูุซ snapshots ุฏูุฑูุงู

### 2. **ุฅุถุงูุงุช ููุชุฑุญุฉ:**
- ุฅุดุนุงุฑุงุช ุนูุฏ ูุดู snapshot
- ูุงุฌูุฉ ุฅุฏุงุฑูุฉ ูุฅุนุงุฏุฉ ุงูุจูุงุก
- ุชูุงุฑูุฑ ุนู ุตุญุฉ ุงูุจูุงูุงุช

### 3. **ูุณุฎ ุงุญุชูุงุทูุฉ:**
- ุญูุธ snapshots ุงููุฏููุฉ
- backup ููุจูุงูุงุช ุงููููุฉ
- ุฎุทุฉ ุงุณุชุฑุฏุงุฏ ุงูููุงุฑุซ

## ุงูุฎูุงุตุฉ ๐

ุชู ุฅุตูุงุญ ุงููุดุงูู ุงูุฑุฆูุณูุฉ ูู ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ:

1. โ **ุงูุชูุงูู ุงููุงูู** ูุน ุฌููุน ุฃุณูุงุก ุญููู ุงูุตูุฑ
2. โ **ูุนุงูุฌุฉ ุขููุฉ** ููุจูุงูุงุช ุงููุนุทูุจุฉ ุฃู ุงูููููุฏุฉ  
3. โ **ุฏุงูุฉ ุฅุนุงุฏุฉ ุงูุจูุงุก** ูุฅุตูุงุญ ุงููุดุงุฑูุน ุงููุชุฃุซุฑุฉ
4. โ **ุชุญุณูู ุงูุฃุฏุงุก** ูุงูุงุณุชูุฑุงุฑ

ุงูุขู ูุฌุจ ุฃู ุชุนูู ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ ุจุดูู ุตุญูุญ ูุฌููุน ุงููุดุงุฑูุน! ๐
